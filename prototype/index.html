<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Streaming Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-black p-6">
            <h1 class="text-xl font-bold text-green-500 mb-6">üéµ MusicApp</h1>
            <nav class="space-y-4">
                <a href="#home" onclick="showScreen('home')" class="block hover:text-green-500">üè† Trang ch·ªß</a>
                <a href="#search" onclick="showScreen('search')" class="block hover:text-green-500">üîç T√¨m ki·∫øm</a>
                <a href="#playlist" onclick="showScreen('playlist')" class="block hover:text-green-500">üìã Playlist</a>
                <a href="#artist" onclick="showScreen('artist')" class="block hover:text-green-500">üë§ Ngh·ªá sƒ©</a>
                <a href="#admin" onclick="showScreen('admin')" class="block hover:text-green-500">‚öôÔ∏è Admin</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-8 overflow-y-auto pb-32">
            <!-- A) HOME SCREEN -->
            <div id="home" class="screen">
                <h2 class="text-3xl font-bold mb-6">Trang ch·ªß / Discover</h2>
                <div class="grid grid-cols-4 gap-4">
                    <div class="bg-gray-800 p-4 rounded cursor-pointer hover:bg-gray-700" onclick="playTrack(1, 'L·∫°c Tr√¥i')">
                        <div class="bg-gray-700 h-40 mb-2 flex items-center justify-center">üéµ</div>
                        <h3 class="font-bold">L·∫°c Tr√¥i</h3>
                        <p class="text-sm text-gray-400">S∆°n T√πng M-TP</p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded cursor-pointer hover:bg-gray-700" onclick="playTrack(2, 'N∆°i N√†y C√≥ Anh')">
                        <div class="bg-gray-700 h-40 mb-2 flex items-center justify-center">üéµ</div>
                        <h3 class="font-bold">N∆°i N√†y C√≥ Anh</h3>
                        <p class="text-sm text-gray-400">S∆°n T√πng M-TP</p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded cursor-pointer hover:bg-gray-700" onclick="playTrack(3, 'R·ªùi B·ªè')">
                        <div class="bg-gray-700 h-40 mb-2 flex items-center justify-center">üéµ</div>
                        <h3 class="font-bold">R·ªùi B·ªè</h3>
                        <p class="text-sm text-gray-400">H√≤a Minzy</p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded cursor-pointer hover:bg-gray-700" onclick="playTrack(4, 'M∆°')">
                        <div class="bg-gray-700 h-40 mb-2 flex items-center justify-center">üéµ</div>
                        <h3 class="font-bold">M∆°</h3>
                        <p class="text-sm text-gray-400">ƒêen V√¢u</p>
                    </div>
                </div>

                <h3 class="text-2xl font-bold mt-8 mb-4">Playlist n·ªïi b·∫≠t</h3>
                <div class="grid grid-cols-3 gap-4">
                    <div class="bg-gray-800 p-4 rounded hover:bg-gray-700 cursor-pointer" onclick="showScreen('playlist')">
                        <div class="bg-gray-700 h-32 mb-2 flex items-center justify-center">üìã</div>
                        <h3 class="font-bold">Top Hits Vi·ªát 2024</h3>
                    </div>
                </div>
            </div>

            <!-- C) SEARCH SCREEN -->
            <div id="search" class="screen hidden">
                <h2 class="text-3xl font-bold mb-6">T√¨m ki·∫øm</h2>
                <input type="text" id="searchInput" placeholder="T√¨m b√†i h√°t, ngh·ªá sƒ©, album..." 
                       class="w-full p-3 rounded bg-gray-800 mb-6" onkeyup="searchMusic()">
                
                <div id="searchResults">
                    <div class="text-gray-400 text-center py-8">Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m ki·∫øm...</div>
                </div>
            </div>

            <!-- D) PLAYLIST SCREEN -->
            <div id="playlist" class="screen hidden">
                <h2 class="text-3xl font-bold mb-6">Top Hits Vi·ªát 2024</h2>
                <p class="text-gray-400 mb-4">5 b√†i h√°t ‚Ä¢ Public</p>
                
                <div id="playlistTracks" class="space-y-2">
                    <div class="bg-gray-800 p-4 rounded flex items-center justify-between hover:bg-gray-700" draggable="true">
                        <div class="flex items-center gap-4">
                            <span class="text-gray-400">1</span>
                            <div>
                                <div class="font-bold">L·∫°c Tr√¥i</div>
                                <div class="text-sm text-gray-400">S∆°n T√πng M-TP</div>
                            </div>
                        </div>
                        <span class="text-gray-400">4:25</span>
                    </div>
                    <div class="bg-gray-800 p-4 rounded flex items-center justify-between hover:bg-gray-700" draggable="true">
                        <div class="flex items-center gap-4">
                            <span class="text-gray-400">2</span>
                            <div>
                                <div class="font-bold">N∆°i N√†y C√≥ Anh</div>
                                <div class="text-sm text-gray-400">S∆°n T√πng M-TP</div>
                            </div>
                        </div>
                        <span class="text-gray-400">5:12</span>
                    </div>
                    <div class="bg-gray-800 p-4 rounded flex items-center justify-between hover:bg-gray-700" draggable="true">
                        <div class="flex items-center gap-4">
                            <span class="text-gray-400">3</span>
                            <div>
                                <div class="font-bold">Ch√∫ng Ta C·ªßa Hi·ªán T·∫°i</div>
                                <div class="text-sm text-gray-400">S∆°n T√πng M-TP</div>
                            </div>
                        </div>
                        <span class="text-gray-400">5:21</span>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-4">üí° K√©o th·∫£ ƒë·ªÉ s·∫Øp x·∫øp l·∫°i th·ª© t·ª± (drag-drop)</p>
            </div>

            <!-- E) ARTIST SCREEN -->
            <div id="artist" class="screen hidden">
                <div class="flex items-center gap-6 mb-8">
                    <div class="w-48 h-48 bg-gray-700 rounded-full flex items-center justify-center text-6xl">üë§</div>
                    <div>
                        <h2 class="text-5xl font-bold mb-2">S∆°n T√πng M-TP</h2>
                        <p class="text-gray-400">1.2M ng∆∞·ªùi theo d√µi</p>
                        <button class="mt-4 bg-green-500 px-6 py-2 rounded-full font-bold hover:bg-green-600">Theo d√µi</button>
                    </div>
                </div>

                <h3 class="text-2xl font-bold mb-4">B√†i h√°t n·ªïi b·∫≠t</h3>
                <div class="space-y-2">
                    <div class="bg-gray-800 p-4 rounded flex items-center justify-between hover:bg-gray-700 cursor-pointer" onclick="playTrack(1, 'L·∫°c Tr√¥i')">
                        <div class="flex items-center gap-4">
                            <span class="text-green-500">‚ñ∂</span>
                            <div>
                                <div class="font-bold">L·∫°c Tr√¥i</div>
                                <div class="text-sm text-gray-400">265,000 l∆∞·ª£t nghe</div>
                            </div>
                        </div>
                        <button onclick="likeTrack(1, event)" class="text-2xl">ü§ç</button>
                    </div>
                    <div class="bg-gray-800 p-4 rounded flex items-center justify-between hover:bg-gray-700">
                        <div class="flex items-center gap-4">
                            <span class="text-green-500">‚ñ∂</span>
                            <div>
                                <div class="font-bold">N∆°i N√†y C√≥ Anh</div>
                                <div class="text-sm text-gray-400">312,000 l∆∞·ª£t nghe</div>
                            </div>
                        </div>
                        <button onclick="likeTrack(2, event)" class="text-2xl">ü§ç</button>
                    </div>
                </div>

                <h3 class="text-2xl font-bold mt-8 mb-4">Album</h3>
                <div class="grid grid-cols-4 gap-4">
                    <div class="bg-gray-800 p-4 rounded">
                        <div class="bg-gray-700 h-40 mb-2 flex items-center justify-center">üíø</div>
                        <h3 class="font-bold">m-tp M-TP</h3>
                        <p class="text-sm text-gray-400">2017</p>
                    </div>
                </div>
            </div>

            <!-- ADMIN SCREEN -->
            <div id="admin" class="screen hidden">
                <h2 class="text-3xl font-bold mb-6">Qu·∫£n tr·ªã n·ªôi dung</h2>
                
                <div class="grid grid-cols-4 gap-4 mb-8">
                    <div class="bg-gray-800 p-6 rounded text-center">
                        <div class="text-4xl mb-2">üë§</div>
                        <div class="text-2xl font-bold">10</div>
                        <div class="text-gray-400">Ngh·ªá sƒ©</div>
                    </div>
                    <div class="bg-gray-800 p-6 rounded text-center">
                        <div class="text-4xl mb-2">üíø</div>
                        <div class="text-2xl font-bold">5</div>
                        <div class="text-gray-400">Album</div>
                    </div>
                    <div class="bg-gray-800 p-6 rounded text-center">
                        <div class="text-4xl mb-2">üéµ</div>
                        <div class="text-2xl font-bold">20</div>
                        <div class="text-gray-400">B√†i h√°t</div>
                    </div>
                    <div class="bg-gray-800 p-6 rounded text-center">
                        <div class="text-4xl mb-2">üìä</div>
                        <div class="text-2xl font-bold">1.2M</div>
                        <div class="text-gray-400">L∆∞·ª£t nghe</div>
                    </div>
                </div>

                <h3 class="text-xl font-bold mb-4">Qu·∫£n l√Ω b√†i h√°t</h3>
                <div class="bg-gray-800 p-6 rounded mb-4">
                    <h4 class="font-bold mb-4">Th√™m b√†i h√°t m·ªõi</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <input type="text" placeholder="T√™n b√†i h√°t" class="p-2 rounded bg-gray-700">
                        <input type="text" placeholder="Ngh·ªá sƒ©" class="p-2 rounded bg-gray-700">
                        <input type="text" placeholder="Album" class="p-2 rounded bg-gray-700">
                        <input type="number" placeholder="Th·ªùi l∆∞·ª£ng (gi√¢y)" class="p-2 rounded bg-gray-700">
                        <input type="text" placeholder="URL file nh·∫°c" class="p-2 rounded bg-gray-700 col-span-2">
                        <button class="bg-green-500 px-6 py-2 rounded font-bold hover:bg-green-600 col-span-2">Th√™m b√†i h√°t</button>
                    </div>
                </div>

                <h4 class="font-bold mb-4">Danh s√°ch b√†i h√°t</h4>
                <table class="w-full bg-gray-800 rounded">
                    <thead>
                        <tr class="border-b border-gray-700">
                            <th class="p-3 text-left">ID</th>
                            <th class="p-3 text-left">T√™n</th>
                            <th class="p-3 text-left">Ngh·ªá sƒ©</th>
                            <th class="p-3 text-left">Th·ªùi l∆∞·ª£ng</th>
                            <th class="p-3 text-left">Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b border-gray-700">
                            <td class="p-3">1</td>
                            <td class="p-3">L·∫°c Tr√¥i</td>
                            <td class="p-3">S∆°n T√πng M-TP</td>
                            <td class="p-3">4:25</td>
                            <td class="p-3">
                                <button class="text-blue-500 mr-2">‚úèÔ∏è S·ª≠a</button>
                                <button class="text-red-500">üóëÔ∏è X√≥a</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="p-3">2</td>
                            <td class="p-3">N∆°i N√†y C√≥ Anh</td>
                            <td class="p-3">S∆°n T√πng M-TP</td>
                            <td class="p-3">5:12</td>
                            <td class="p-3">
                                <button class="text-blue-500 mr-2">‚úèÔ∏è S·ª≠a</button>
                                <button class="text-red-500">üóëÔ∏è X√≥a</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- B) PLAYER MINI (Fixed bottom) -->
    <div class="fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-4">
        <div class="flex items-center justify-between max-w-screen-xl mx-auto">
            <!-- Track Info -->
            <div class="flex items-center gap-4 w-1/4">
                <div class="w-14 h-14 bg-gray-700 rounded flex items-center justify-center" id="playerCover">üéµ</div>
                <div>
                    <div class="font-bold" id="playerTitle">Ch·ªçn b√†i h√°t</div>
                    <div class="text-sm text-gray-400" id="playerArtist">-</div>
                </div>
                <button onclick="likeCurrentTrack()" class="text-2xl" id="likeBtn">ü§ç</button>
            </div>

            <!-- Controls -->
            <div class="w-1/2">
                <div class="flex justify-center items-center gap-4 mb-2">
                    <button class="text-gray-400 hover:text-white" onclick="toggleShuffle()" id="shuffleBtn">üîÄ</button>
                    <button class="text-gray-400 hover:text-white" onclick="previousTrack()">‚èÆÔ∏è</button>
                    <button class="bg-white text-black rounded-full w-10 h-10 flex items-center justify-center hover:scale-110" onclick="togglePlay()" id="playBtn">‚ñ∂Ô∏è</button>
                    <button class="text-gray-400 hover:text-white" onclick="nextTrack()">‚è≠Ô∏è</button>
                    <button class="text-gray-400 hover:text-white" onclick="toggleRepeat()" id="repeatBtn">üîÅ</button>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-xs text-gray-400" id="currentTime">0:00</span>
                    <input type="range" class="flex-1 h-1 bg-gray-700 rounded" id="seekBar" min="0" max="100" value="0" oninput="seekTo(this.value)">
                    <span class="text-xs text-gray-400" id="duration">0:00</span>
                </div>
            </div>

            <!-- Volume -->
            <div class="flex items-center gap-2 w-1/4 justify-end">
                <span>üîä</span>
                <input type="range" class="w-24 h-1 bg-gray-700 rounded" id="volumeBar" min="0" max="100" value="70" oninput="setVolume(this.value)">
            </div>
        </div>
    </div>

    <audio id="audioPlayer" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>

    <script>
        let currentTrackId = null;
        let isPlaying = false;
        let isShuffle = false;
        let isRepeat = false;
        let likedTracks = new Set();
        const audio = document.getElementById('audioPlayer');

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById(screenId).classList.remove('hidden');
        }

        function playTrack(id, title, artist = 'S∆°n T√πng M-TP') {
            currentTrackId = id;
            document.getElementById('playerTitle').textContent = title;
            document.getElementById('playerArtist').textContent = artist;
            audio.src = 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-' + id + '.mp3';
            audio.play();
            isPlaying = true;
            document.getElementById('playBtn').textContent = '‚è∏Ô∏è';
            
            // Mock: ghi l·ªãch s·ª≠ sau 30s
            setTimeout(() => {
                console.log(`‚úÖ Ghi l·ªãch s·ª≠: Track ${id} - ${title} t·∫°i ${new Date().toLocaleTimeString()}`);
            }, 30000);
        }

        function togglePlay() {
            if (isPlaying) {
                audio.pause();
                document.getElementById('playBtn').textContent = '‚ñ∂Ô∏è';
            } else {
                audio.play();
                document.getElementById('playBtn').textContent = '‚è∏Ô∏è';
            }
            isPlaying = !isPlaying;
        }

        function previousTrack() {
            if (currentTrackId > 1) {
                playTrack(currentTrackId - 1, 'Previous Track');
            }
        }

        function nextTrack() {
            playTrack(currentTrackId + 1, 'Next Track');
        }

        function toggleShuffle() {
            isShuffle = !isShuffle;
            document.getElementById('shuffleBtn').style.color = isShuffle ? '#1db954' : '';
        }

        function toggleRepeat() {
            isRepeat = !isRepeat;
            document.getElementById('repeatBtn').style.color = isRepeat ? '#1db954' : '';
        }

        function seekTo(value) {
            audio.currentTime = (audio.duration / 100) * value;
        }

        function setVolume(value) {
            audio.volume = value / 100;
        }

        function likeTrack(id, event) {
            event.stopPropagation();
            if (likedTracks.has(id)) {
                likedTracks.delete(id);
                event.target.textContent = 'ü§ç';
                console.log(`‚ùå Unlike track ${id}`);
            } else {
                likedTracks.add(id);
                event.target.textContent = '‚ù§Ô∏è';
                console.log(`‚úÖ Like track ${id}`);
            }
        }

        function likeCurrentTrack() {
            const btn = document.getElementById('likeBtn');
            if (currentTrackId) {
                if (likedTracks.has(currentTrackId)) {
                    likedTracks.delete(currentTrackId);
                    btn.textContent = 'ü§ç';
                } else {
                    likedTracks.add(currentTrackId);
                    btn.textContent = '‚ù§Ô∏è';
                }
            }
        }

        function searchMusic() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const results = document.getElementById('searchResults');
            
            if (!query) {
                results.innerHTML = '<div class="text-gray-400 text-center py-8">Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m ki·∫øm...</div>';
                return;
            }

            // Mock search - t√¨m ki·∫øm kh√¥ng d·∫•u
            const tracks = [
                {id: 1, title: 'L·∫°c Tr√¥i', artist: 'S∆°n T√πng M-TP', keywords: 'lac troi son tung'},
                {id: 2, title: 'N∆°i N√†y C√≥ Anh', artist: 'S∆°n T√πng M-TP', keywords: 'noi nay co anh son tung'},
                {id: 3, title: 'R·ªùi B·ªè', artist: 'H√≤a Minzy', keywords: 'roi bo hoa minzy'},
                {id: 4, title: 'M∆°', artist: 'ƒêen V√¢u', keywords: 'mo den vau'}
            ];

            const found = tracks.filter(t => t.keywords.includes(query));

            if (found.length === 0) {
                results.innerHTML = '<div class="text-gray-400 text-center py-8">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£</div>';
                return;
            }

            results.innerHTML = found.map(t => `
                <div class="bg-gray-800 p-4 rounded flex items-center justify-between hover:bg-gray-700 cursor-pointer mb-2" onclick="playTrack(${t.id}, '${t.title}', '${t.artist}')">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-gray-700 rounded flex items-center justify-center">üéµ</div>
                        <div>
                            <div class="font-bold">${t.title}</div>
                            <div class="text-sm text-gray-400">${t.artist}</div>
                        </div>
                    </div>
                    <span class="text-green-500">‚ñ∂</span>
                </div>
            `).join('');
        }

        // Update time
        audio.addEventListener('timeupdate', () => {
            const current = Math.floor(audio.currentTime);
            const total = Math.floor(audio.duration);
            document.getElementById('currentTime').textContent = formatTime(current);
            document.getElementById('duration').textContent = formatTime(total);
            document.getElementById('seekBar').value = (current / total) * 100 || 0;
        });

        function formatTime(seconds) {
            const m = Math.floor(seconds / 60);
            const s = seconds % 60;
            return `${m}:${s < 10 ? '0' : ''}${s}`;
        }

        // Drag-drop for playlist (basic)
        let draggedElement = null;
        document.querySelectorAll('[draggable="true"]').forEach(item => {
            item.addEventListener('dragstart', (e) => {
                draggedElement = item;
                item.style.opacity = '0.5';
            });
            item.addEventListener('dragend', (e) => {
                item.style.opacity = '1';
            });
            item.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            item.addEventListener('drop', (e) => {
                e.preventDefault();
                if (draggedElement !== item) {
                    const parent = item.parentNode;
                    parent.insertBefore(draggedElement, item);
                    console.log('‚úÖ ƒê√£ s·∫Øp x·∫øp l·∫°i playlist');
                }
            });
        });
    </script>
</body>
</html>